name: test
on:
  push:
    branches:
      - master
jobs:
  action:
    runs-on: ubuntu-20.04
    steps:
      - run: echo "🎉 The job was automatically triggered by a ${{ github.event_name }}"
      - run: echo "🐧 this job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "🔎 the name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."

      - name: Checkout
        uses: actions/checkout@master

      - run: echo "💡 The ${{ github.repository }} repository has been cloned to the runner"
      - run: echo "🖥️ The workflow is now ready to test your code on the runner."

      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - run: echo "🍏 This job's status is ${{ job.status }}"

      - name: Set node-version
        uses: actions/setup-node@v1
        with:
          node-version: 14

      - name: Set env variables
        uses: ./cicd/ci-const/

      - name: run
        run: |
          echo "$ACTIONS_RUNTIME_URL"
          git diff --name-only 1c78540b51d2a47e88e4d5149bfed5fa50d9ea1a~ 371eb347b5d09c5a84c9e8b1e2c106b11e163dcc

      - name: run ci
        run: |
          npm ci
        working-directory: ./cicd/ci-exec

      - name: Compile artifact package
        uses: ./cicd/ci-exec/